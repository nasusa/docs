---
layout: page
title: "List of commands"
category: get-started
date: 2015-10-13 14:25:15
order: 5
summary: "Seravo.com contains a handful of additional commands for helping the developer with basic tasks"
---

Vagrant box contains plenty of helpers for developing your site and migrating data to/from production.

Production contains most of these and also a command for purging cache.

## List of commands

### Admin helpers
#### wp-backup
``` wp-backup ``` - Dumps the wordpress database and backs up the ``` /data ``` directory into ``` /data/backups/data ``` using ``` rdiff-backup ```.

#### wp-backup-list-changes
``` wp-backup-list-changes ``` - Lists all files known by ``` rdiff-backup ``` sorted by timestamp. Use this to find out what files really changed in the system, as the file attribute mtime is not a reliable source of information.

#### wp-fix-checksums
``` wp-fix-checksums ``` - Automates fixing typical situations where ``` wp core verify-checksums ``` returns an error.

#### wp-flush-cache
``` wp-flush-cache ``` - Wrapper for ``` wp-purge-cache ``` with flush cache terminology in line with what wp-cli uses

#### wp-list-files-mtime
``` wp-list-files-mtime ``` - Lists all recently changed filed based on mtime. This is less reliable than ``` wp-backu-list-changes ``` as files can have their mtime attribute set to anything.

#### wp-optimize-images
``` wp-optimize-images ``` - Optimizes images in the default path ``` /data/wordpress/htdocs/wp-content/uploads/ ``` unless a directory is given as a parameter. Maximum image size parameters are stored in the database in the ``` wp_options ``` table as ``` seravo-image-max-resolution-width ``` and ``` seravo-image-max-resolution-width ```. Default values are ``` 4000px ```. The script does not allow optimization if either of the values is set to less than ``` 500px ```.

#### wp-purge-cache
``` wp-purge-cache ``` - Purges cache

#### wp-seravo-plugin-update
``` wp-seravo-plugin-update ``` - Update the must-use seravo-plugin to the latest version. It also cleans up all legacy remnants of the ``` wp-palvelu-plugin ```.



### Developer helpers
#### wp-list-env
```$ wp-list-env ``` - Prints a list of defined environment variables. Both the Vagrant image and the production server contain ENVs which define ports and credentials for WordPress. With this command you can debug the settings that you have.

#### wp-pomo-compile
``` wp-pomo-compile ``` - Find PO files, process each with msgfmt and rename the result to MO.

#### wp-restart-nginx
```$ wp-restart-nginx``` - Restarts the web server and reloads any configuration at  ```/data/wordpress/nginx/*.conf```

#### wp-restart-php
``` wp-restart-php ```

#### wp-restart-php5-fpm
``` wp-restart-php5-fpm ```

#### wp-restart-php7-fpm
``` wp-restart-php7-fpm ```

#### wp-speed-test
``` wp-speed-test ``` - Measure the load time of PHP resonses.

#### wp-test
`$ wp-test` - Runs [Rspec tests]({{ site.baseurl }}{% post_url 2015-10-11-integration-tests %}) from ```/data/wordpress/tests/rspec/*.rb```

#### wp-watch-logs
``` wp-watch-logs ``` - Start watching all the logs under ``` /data/log/ ```



### Vagrant commands
> **Note:** These are only available inside the Vagrant box.

#### wp-ssh-production
```$ wp-ssh-production``` - If your config.yml is set up with production details you can ssh into your production instance.

#### wp-pull-production-db
`$ wp-pull-production-db` - Copies the production database into your local Vagrant box. Also replaces all production siteurls in the database with your local development siteurl.

### Vagrant internal commands (good to know, but the developers won't need to use these.)

<div class="bs-callout bs-callout-info">
  <strong>Note</strong>: These commands are used in <code>vagrantfile</code> by default.
</div>

#### wp-vagrant-activation
```$ wp-vagrant-activation ``` - Restarts nginx and avahi-daemon, generates domains in /etc/hosts and production details to .ssh/config

#### wp-vagrant-dump-db
```$ wp-vagrant-dump-db ``` - This is run everytime you `halt` or `destroy` the vagrant box. So that you have dump file next time.

#### wp-vagrant-import-db
```$ wp-vagrant-import-db ``` - This is run everytime you `up` the vagrant box.

It tries to import the dump file generated by ```$ wp-vagrant-dump-db``` so you can continue development where you left off.



### TODO:
Write information about the following commands:

#### wp-makepot
``` wp-makepot ```

